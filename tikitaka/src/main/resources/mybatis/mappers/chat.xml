<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="chat">
<!-- useGeneratedKeys = "true"(기본값 false), keyColumn = [PK 컬럼명], keyProperty = [매핑할 변수명] -->
	<insert id="insert" parameterType="chat" useGeneratedKeys="true" 
			keyProperty="no">
		<![CDATA[
			insert into chat
			values(null,#{title},#{contents},#{joinCount},now(), "PERSONAL")
		]]>
	</insert>
	
	<!-- chatNo에 해당하는 채팅방의 공지 리스트 -->
	<select id="findByChatNo" parameterType="string" resultType="map">
	 	<![CDATA[	
	 		SELECT a.important important, a.no, a.title title, a.contents contents,  b.name name, a.reg_date regDate
			FROM notice a, user b
			WHERE a.user_no = b.no
			AND a.chat_no = 890;
	 	]]>
	</select>
	
</mapper>
